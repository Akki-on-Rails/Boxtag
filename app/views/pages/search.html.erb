<div class="container">
  <div class="d-flex">
    <%= link_to 'javascript:history.go(-1);' do %>
      <i class="fas fa-arrow-left m-1 p-1 me-3"></i>
    <% end %>
    <%= form_tag search_path, method: :get do %>
      <div class="d-flex">
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Find collections, boxes or items"
        %>
        <%= submit_tag "Search", class: "button-main" %>
      </div>
    <% end %>
  </div>

  <div class="results-container">
    <hr>
    <% if @results_count.zero? %>
      <p>No results found. Please try something else.</p>
    <% else %>
      <p>Results: <%= @results_count %></p>
    <% end %>
    <div class="result-chapter">
      <% if @collections.any? %>
        <h2>Collections (<%= @collections.size %>)</h2>
        <% @collections.each do |collection| %>
          <%= link_to collection_path(collection) do %>
            <div class="result-card">
              <h3><%= collection.name %></h3>
              <p><%= collection.description %></p>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <div class="result-chapter">
      <% if @boxes.any? %>
        <h2>Boxes (<%= @boxes.size %>)</h2>
        <% @boxes.each do |box| %>
          <%= link_to box_path(box) do %>
            <div class="result-card">
              <h3><%= box.name %></h3>
              <p><%= box.description %></p>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <div class="result-chapter">
      <% if @items.any? %>
        <h2>Items (<%= @items.size %>)</h2>
        <% @items.each do |item| %>
          <%= link_to box_path(item.box_id) do %>
            <div class="result-card">
              <h3><%= item.name %></h3>
              <p>Stored in: <%= item.box.name %></p>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
